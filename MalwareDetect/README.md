# 恶意代码AI检测系统后端

## 中间件
- Golang + Gin
- wt, Bear authorization
- Viper, Go语言应用程序处理配置信息的库
- Kafka

## 数据库设计

model

```go
type Model struct {
	gorm.Model
	Name      string `gorm:"type:varchar(30);not null"`
	Path string `gorm:"varchar(100);not null"`
}
```

user

```go
type User struct {
	gorm.Model
	Name      string `gorm:"type:varchar(30);not null"`
	Telephone string `gorm:"varchar(11);not null;unique"`
	Password  string `gorm:"size:255;not null"`
}
```
malware

```go
type Malware struct {
    ID         uuid.UUID `json:"id" gorm:"type:char(36);primary_key"`
    Name       string    `json:"name" gorm:"type:varchar(50);not null"`
    Path       string    `json:"path" gorm:"type:varchar(255);not null"`
    UserId     uint      `json:"user_id" gorm:"not null"`
    CategoryId uint      `json:"category_id" gorm:"not null"`
    Category   *Category
    Content    string    `json:"content" gorm:"type:text;not null"`
    CreatedAt  time.Time `json:"created_at" gorm:"type:timestamp"`
    UpdatedAt  time.Time `json:"updated_at" gorm:"type:timestamp"`
}
```

category

```go
type Category struct {
	ID         uint      `json:"id" gorm:"primary_key"`
	LabelName  string    `json:"label_name" gorm:"type:varchar(30);not null"`
	FamilyName string    `json:"family_name" gorm:"type:varchar(50);not null;unique"`
	CreatedAt  time.Time `json:"created_at" gorm:"type:timestamp"`
	UpdatedAt  time.Time `json:"updated_at" gorm:"type:timestamp"`
}
```

task

```go
type Task struct {
	gorm.Model
	Type      string `gorm:"type:varchar(30);not null"`
	Username string `gorm:"varchar(30);not null"`
    Context string `gorm:"varchar(100);not null"`
    Status string `gorm:"varchar(30);not null"`
	Input string `gorm:"varchar(255);not null"`
	Output string `gorm:"varchar(255);not null"`
}
```
## 运行

```mysql
CREATE DATABASE malware_detect_system;
```

> go run main.go route.go

