package handler

import (
	"MalwareDetect/service"
	"MalwareDetect/util/response"
	"github.com/gin-gonic/gin"
)

//var categoryController = service.NewCategoryService()

func CategoryCreate(ctx *gin.Context) {
	category, err := service.CoreCategoryService.Create(ctx)
	if err != nil {
		response.Fail(ctx, err.Error(), nil)
		return
	}
	response.Success(ctx, "创建成功", gin.H{"category": category})
}

func CategoryUpdate(ctx *gin.Context) {
	category, err := service.CoreCategoryService.Update(ctx)
	if err != nil {
		response.Fail(ctx, err.Error(), nil)
		return
	}
	response.Success(ctx, "更新成功", gin.H{"category": category})
}

func CategoryShow(ctx *gin.Context) {
	category, err := service.CoreCategoryService.Show(ctx)
	if err != nil {
		response.Fail(ctx, err.Error(), nil)
		return
	}
	response.Success(ctx, "", gin.H{"category": category})
}

func CategoryDelete(ctx *gin.Context) {
	category, err := service.CoreCategoryService.Delete(ctx)
	if err != nil {
		response.Fail(ctx, err.Error(), nil)
	}
	response.Success(ctx, "删除成功", gin.H{"category": category})
}

func CategoryList(ctx *gin.Context) {
	ginRsp, err := service.CoreCategoryService.PageList(ctx)
	if err != nil {
		response.Fail(ctx, err.Error(), nil)
		return
	}
	response.Success(ctx, "", ginRsp)
}
